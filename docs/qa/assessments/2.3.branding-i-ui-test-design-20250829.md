# Test Design: Story 2.3

Date: 2025-08-29
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 16
- Unit tests: 2 (12.5%)
- Integration tests: 5 (31.25%)
- E2E tests: 9 (56.25%)
- Priority distribution: P0: 8, P1: 8, P2: 0

The test strategy for this story is heavily focused on E2E and Integration testing. This is due to the nature of the story, which involves a visual UI overhaul and has a critical requirement to prevent regressions in existing user flows. Unit tests are used for specific, isolated validations.

## Test Scenarios by Acceptance Criteria

### AC1: UI jest zgodny z sekcjami „Branding”, „Komponenty”, „A11y” w `docs/front-end-spec.md`

#### Scenarios

| ID | Level | Priority | Test | Justification |
| :--- | :--- | :--- | :--- | :--- |
| 2.3-UNIT-001 | Unit | P1 | Verify CSS variables for the new color palette are correctly defined in `globals.css`. | Pure static file content check, foundational for the theme. |
| 2.3-E2E-002 | E2E | P1 | Visually verify that primary, secondary, and surface colors are applied correctly. | User-facing visual check that requires rendering the full UI. |
| 2.3-INT-003 | Integration | P0 | `Button` component displays all variants (Primary, Secondary, Ghost) correctly. | Tests a critical interactive component's props and styles. |
| 2.3-INT-004 | Integration | P0 | `Button` component shows a loading state when the `loading` prop is true. | Verifies a key interactive state of a core component. |
| 2.3-INT-005 | Integration | P1 | `Input` and `Textarea` components match the new styles. | Verifies visual and stateful behavior of core form elements. |
| 2.3-INT-006 | Integration | P1 | `FileInput` displays file format/size info and a "Change file" action. | Tests the component's state changes based on user interaction. |
| 2.3-E2E-007 | E2E | P1 | The `Stepper/Progress` indicator is visible during the analysis workflow. | Requires running the full workflow to observe the component in context. |
| 2.3-INT-008 | Integration | P1 | `Toast` and `StatusBanner` components can be triggered and displayed. | Tests a core feedback mechanism's ability to render based on state. |
| 2.3-E2E-009 | E2E | P0 | All interactive elements have a visible `focus-visible` outline. | Critical for keyboard accessibility; requires tabbing through the live page. |
| 2.3-E2E-010 | E2E | P0 | All text has a color contrast ratio of at least 4.5:1. | Critical accessibility requirement; can be automated with tools like Axe. |
| 2.3-UNIT-011 | Unit | P1 | All specified components have the correct `data-testid` attributes. | Static check on rendered output to ensure testability. |

### AC2: Smoke 1→4 przechodzi na mobile i desktop; brak regresji Stories 1.1–1.4

#### Scenarios

| ID | Level | Priority | Test | Justification |
| :--- | :--- | :--- | :--- | :--- |
| 2.3-E2E-012 | E2E | P0 | User can successfully complete the workflow from story 1.1 (entering artist data). | Validates a core user journey is not broken. Mitigates risk `TECH-001`. |
| 2.3-E2E-013 | E2E | P0 | User can successfully complete the workflow from story 1.2 (uploading a track). | Validates a core user journey is not broken. Mitigates risk `TECH-001`. |
| 2.3-E2E-014 | E2E | P0 | User can successfully complete the workflow from story 1.3 (generating/editing). | Validates a core user journey is not broken. Mitigates risk `TECH-001`. |
| 2.3-E2E-015 | E2E | P0 | User can successfully complete the workflow from story 1.4 (using the description). | Validates a core user journey is not broken. Mitigates risk `TECH-001`. |
| 2.3-E2E-016 | E2E | P0 | All P0 E2E tests (012-015) pass on both mobile and desktop viewports. | Ensures responsive design has not been broken by the UI changes. |

## Risk Coverage

- **TECH-001 (Regression)**: Covered by scenarios `2.3-E2E-012` through `2.3-E2E-016`.
- **TECH-003 (A11y)**: Covered by scenarios `2.3-E2E-009` and `2.3-E2E-010`.
- **TECH-002 (Inconsistency)**: Partially covered by `2.3-UNIT-001` and `2.3-E2E-002`. Requires manual design review.

## Recommended Execution Order

1.  P0 Unit and Integration tests (`2.3-INT-003`, `2.3-INT-004`).
2.  P0 E2E tests (`2.3-E2E-009`, `2.3-E2E-010`, `2.3-E2E-012` to `2.3-E2E-016`).
3.  P1 tests as development of components completes.
