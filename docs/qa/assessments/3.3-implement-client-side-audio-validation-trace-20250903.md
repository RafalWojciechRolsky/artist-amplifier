# Requirements Traceability Matrix

## Story: 3.3 - Implement Client-Side Audio Validation

Date: 2025-09-03
Designer: Quinn (Test Architect)

### Coverage Summary

- **Total Requirements**: 5
- **Fully Covered**: 5 (100%)
- **Partially Covered**: 0 (0%)
- **Not Covered**: 0 (0%)

All acceptance criteria for this story have full test coverage planned across unit and end-to-end tests.

### Requirement Mappings

#### AC1: Before the upload process begins, the selected audio file is validated on the client-side.

**Coverage: FULL**

- **E2E Test**: `3.3-E2E-001`
  - **Given**: A user is on the upload page.
  - **When**: They select a file.
  - **Then**: The validation logic is triggered before any upload API calls are made.

#### AC2: The file is checked against max file size (50MB) and max duration (10 minutes).

**Coverage: FULL**

- **Unit Test**: `3.3-UNIT-002`
  - **Given**: A file object with size > 50MB.
  - **When**: The `validateAudioFile` function is called.
  - **Then**: The function returns `isValid: false` with a size-related error message.

- **Unit Test**: `3.3-UNIT-003`
  - **Given**: An audio file with duration > 10 minutes.
  - **When**: The `validateAudioFile` function is called.
  - **Then**: The function returns `isValid: false` with a duration-related error message.

#### AC3: If the file is invalid, a clear and user-friendly error message is displayed.

**Coverage: FULL**

- **E2E Test**: `3.3-E2E-002`
  - **Given**: A user is on the upload page.
  - **When**: They select a file that is larger than 50MB.
  - **Then**: The UI displays the specific error message "File is too large" and the upload button is disabled.

- **E2E Test**: `3.3-E2E-003`
  - **Given**: A user is on the upload page.
  - **When**: They select a file with a duration longer than 10 minutes.
  - **Then**: The UI displays the specific error message "Audio is too long" and the upload button is disabled.

#### AC4: If the file is valid, the upload process proceeds as normal.

**Coverage: FULL**

- **E2E Test**: `3.3-E2E-001`
  - **Given**: A user has selected a valid audio file (e.g., 40MB, 5 minutes).
  - **When**: They initiate the upload.
  - **Then**: The UI shows the upload in progress, and the calls to the backend for signed URLs are made.

#### AC5: The validation logic is implemented in a way that does not block the UI for an extended period.

**Coverage: FULL**

- **E2E Test**: `3.3-E2E-004`
  - **Given**: A user is on the upload page with a throttled CPU/network profile.
  - **When**: They select a large file (e.g., ~49MB).
  - **Then**: The UI remains interactive (e.g., buttons are clickable, animations are smooth) while the file is being processed client-side.

### Critical Gaps

- No gaps were identified. All requirements are fully covered.
