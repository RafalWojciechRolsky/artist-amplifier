# <!-- Powered by BMAD™ Core -->

# Story 1.1: Wprowadzanie Danych Artysty

## Status

Done

## Story

**As a** artysta,
**I want** wprowadzić podstawowe informacje o sobie,
**so that** wygenerowany opis był spersonalizowany i wiarygodny.

## Acceptance Criteria

1. Użytkownik widzi na ekranie dwa pola do wprowadzenia danych: "Nazwa artysty/zespołu" i "Opis artysty".
2. Pole "Nazwa artysty/zespołu" jest polem wymaganym.
3. Pole "Opis artysty" jest polem wymaganym.
4. Aplikacja poprawnie przechowuje wprowadzone dane w stanie sesji przeglądarki na czas jej trwania.
5. Pole "Opis artysty" jest polem typu textarea z licznikiem znaków; minimalnie 50, maksymalnie 1000 znaków; walidacja z czytelnym komunikatem w razie naruszenia limitów.
6. Etykiety i komunikaty walidacyjne są jednoznaczne; kolejność fokusu jest logiczna i zgodna z a11y.
7. Layout formularza działa na ekranach mobilnych w ramach jednego ekranu (single page).

## Tasks / Subtasks

- [x] Utworzenie komponentu `ArtistForm.tsx` (AC: 1, 2, 3, 5, 6, 7)

  - [x] Implementacja pola tekstowego "Nazwa artysty/zespołu" z walidacją wymaganego pola
  - [x] Implementacja pola typu textarea "Opis artysty" z walidacją wymaganego pola i limitów znaków (50-1000)
  - [x] Dodanie licznika znaków do pola "Opis artysty"
  - [x] Implementacja walidacji formularza z czytelnymi komunikatami błędów
  - [x] Dostosowanie wyglądu z użyciem Tailwind CSS
  - [x] Zapewnienie responsywności dla urządzeń mobilnych
  - [x] Implementacja poprawnej kolejności fokusu i atrybutów dostępności (a11y)

- [x] Implementacja mechanizmu przechowywania danych w sessionStorage (AC: 4)

  - [x] Implementacja funkcji zapisującej dane formularza do sessionStorage
  - [x] Implementacja funkcji odczytującej dane z sessionStorage przy ładowaniu formularza
  - [x] Dodanie funkcji obsługującej aktualizację stanu przy zmianach w formularzu

- [x] Zintegrowanie formularza z głównym komponentem aplikacji (AC: 1, 4)

  - [x] Dodanie komponentu `ArtistForm` do `src/app/page.tsx`
  - [x] Podłączenie zarządzania stanem formularza do głównego reduktora
  - [x] Implementacja przekazywania danych między formularzem a innymi komponentami

- [x] Implementacja testów jednostkowych (AC: 1, 2, 3, 5)
  - [x] Testy walidacji pól formularza
  - [x] Testy mechanizmu licznika znaków
  - [x] Testy zapisywania i odczytywania danych z sessionStorage

## Dev Notes

### Struktura komponentów

[Source: docs/architecture/10-frontend-architecture.md#10.2]

- Komponent `ArtistForm.tsx` powinien być umieszczony w katalogu `src/components/`
- Komponent powinien być oznaczony jako `"use client"` na górze pliku, ponieważ zawiera interaktywne elementy
- Nazewnictwo i odpowiedzialności zgodnie z dokumentacją architektury

### Zarządzanie stanem

[Source: docs/architecture/10-frontend-architecture.md#10.3]

- Główny stan aplikacji jest zarządzany przez `useReducer` w `src/app/page.tsx`
- Stany maszyny: `idle → generating → readyDescription` + `error`
- Brak bibliotek global state (Redux/Zustand/React Query)
- Wymiana danych między komponentami przez propsy i/lub prosty context lokalny ekranu
- Persistencja w obrębie bieżącej sesji przeglądarki używa sessionStorage
- Klucze sessionStorage powinny być w formacie `aa:v1:*`

### Szczegółowa specyfikacja komponentu ArtistForm

[Source: docs/architecture/6-components.md#6.1]

- Pola: `artistName` (wymagane) oraz `artistDescription` (wymagane, textarea 50-1000 znaków z licznikiem)
- Walidacje: wymagane pola i limity znaków dla opisu artysty
- Język UI/wyniku: domyślnie `pl` (brak selektora języka w MVP)

### Stylowanie i UI

[Source: docs/architecture/10-frontend-architecture.md#10.6]

- Używać Tailwind CSS v4 (utility-first)
- Prosty, czytelny layout (mobile-first)
- Spójne stany focus/disabled, dostępne kontrasty
- Reużywalne klasy pomocnicze

### Dostępność (A11y)

[Source: docs/architecture/6-components.md#6.5]

- Label/aria dla inputów i przycisków
- Poprawne stany focus
- Obsługa klawisza Enter/Space tam gdzie ma sens

### Testing

[Source: docs/architecture/10-frontend-architecture.md#10.8]

- Testy jednostkowe: prosta logika reduktora (Jest) i helpery walidacji

## Testing

[Source: docs/architecture/10-frontend-architecture.md#10.8]

- Framework: Jest
- Wymagane testy jednostkowe dla:
  - Walidacji formularza
  - Funkcji pomocniczych
  - Podstawowych interakcji użytkownika
- Pliki testów powinny być umieszczone w katalogu `__tests__` obok testowanych komponentów
- Brak wymogu pełnego pokrycia testami w MVP, ale kluczowa funkcjonalność powinna być przetestowana

## Change Log

| Date       | Version | Description                                                     | Author             |
| ---------- | ------- | --------------------------------------------------------------- | ------------------ |
| 2025-08-27 | 1.0     | Initial draft                                                   | Bob (Scrum Master) |
| 2025-08-27 | 1.1     | Implemented `ArtistForm`, session storage, and page integration | James (Dev)        |
| 2025-08-27 | 1.2     | Added Jest setup and unit tests; all tests passing              | James (Dev)        |

## Dev Agent Record

### Agent Model Used

Cascade

### Debug Log References

- Created `src/components/ArtistForm.tsx` with validations, a11y, counter, Tailwind styles
- Added session helpers `src/lib/session.ts` and integrated persistence via `sessionStorage` key `aa:v1:artist_form`
- Updated `src/app/page.tsx` to client component with `useReducer`; ESLint passed

### Completion Notes List

- AC 1–3,5–7 implemented via `ArtistForm`
- AC 4 implemented via session storage read/write and state sync
- UI is mobile-first and accessible; Polish labels and messages
- Jest configured with jsdom and Testing Library; 6 tests passing

### File List

- New: `src/components/ArtistForm.tsx`
- New: `src/lib/session.ts`
- Modified: `src/app/page.tsx`
- New: `jest.config.mjs`, `jest.setup.ts`, `src/components/__tests__/ArtistForm.test.tsx`, `src/lib/__tests__/session.test.ts`

## QA Results

- **Traceability**: PASS. All acceptance criteria are mapped to completed tasks.
- **Code Review**: PASS. Implementation is clean, follows architectural guidelines, and meets all functional requirements.
- **Test Review**: PASS. Unit tests are comprehensive, covering validation, accessibility, and edge cases.
- **Risk Assessment**: LOW. No significant risks identified across technical, functional, or security domains.
